# Meeting Assistant Web 前端

智语面试助手 Web 前端项目，基于 Next.js 16 构建的现代化 SaaS 产品官网和用户中心。

## 🚀 技术栈

- **框架**: Next.js 16.1.1 (App Router + Turbopack)
- **UI**: React 19 + TailwindCSS 4
- **认证**: NextAuth.js 5.0 (Beta)
- **语言**: TypeScript 5
- **组件库**: Radix UI + Lucide Icons

## 📁 项目结构

```
meeting-assistant-web/
├── app/                      # Next.js App Router 页面
│   ├── api/auth/             # NextAuth API 路由
│   ├── page.tsx              # 首页 - 产品展示
│   ├── user/page.tsx         # 用户中心 - 登录/注册/仪表盘
│   ├── pricing/page.tsx      # 定价页面
│   ├── download/page.tsx     # 下载页面
│   ├── docs/page.tsx         # 文档页面
│   ├── privacy/page.tsx      # 隐私政策
│   └── terms/page.tsx        # 用户协议
├── components/               # React 组件
│   ├── ui/                   # 基础 UI 组件 (Button, Card, Tabs, Accordion)
│   ├── Header.tsx            # 全局导航头
│   ├── Footer.tsx            # 全局页脚
│   ├── GlassCard.tsx         # 玻璃拟态卡片
│   ├── GradientText.tsx      # 渐变文字效果
│   ├── PrimaryButton.tsx     # 主按钮
│   ├── SecondaryButton.tsx   # 次级按钮
│   └── SessionProvider.tsx   # NextAuth Session Provider
├── lib/                      # 工具库
│   ├── api.ts                # 后端 API 客户端
│   ├── auth.ts               # NextAuth 配置
│   └── utils.ts              # 通用工具函数
└── public/                   # 静态资源
```

## 🎨 设计系统

### 颜色主题
- **主色**: `#6366F1` (Indigo) - 品牌标识色
- **强调色**: `#8B5CF6` (Violet) - 渐变和高亮
- **背景**: 深色玻璃拟态设计
- **文字**: `#EDEFF7` (主要) / `#AAB0C0` (次要)

### 组件特性
- 玻璃拟态 (Glassmorphism) 卡片效果
- 流畅的渐变动画
- 响应式设计适配移动端

## 🔗 与后端服务交互

### API 客户端 (`lib/api.ts`)

前端通过 `ApiClient` 类与后端 FastAPI 服务通信：

```typescript
// 后端地址配置
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';

// API 端点
apiClient.wechatCallback(code)        // 微信登录回调
apiClient.createDeviceClaimCode()     // 生成设备绑定码
apiClient.claimDevice(code, deviceId) // 客户端绑定
apiClient.refreshToken(refreshToken)  // 刷新 Token
apiClient.getCurrentUser()            // 获取当前用户
apiClient.getEntitlements()           // 获取用户权益
apiClient.getModels()                 // 获取可用模型
apiClient.getUsage()                  // 获取使用量
```

### 认证流程 (`lib/auth.ts`)

使用 NextAuth.js 5.0 管理认证状态：

```
┌─────────────────────────────────────────────────────────────┐
│                     认证流程                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────┐    ┌─────────────┐    ┌─────────────────┐     │
│  │  用户   │───>│ Web 前端    │───>│ 后端 API        │     │
│  └─────────┘    └─────────────┘    └─────────────────┘     │
│       │              │                    │                 │
│       │ 1. 微信扫码   │ 2. 获取 code       │                 │
│       │<─────────────│                    │                 │
│       │              │ 3. POST /auth/wechat/callback        │
│       │              │───────────────────>│                 │
│       │              │                    │ 4. 验证并返回    │
│       │              │<───────────────────│    JWT Token    │
│       │              │                    │                 │
│       │ 5. 登录成功   │ 6. 存储 Session    │                 │
│       │<─────────────│                    │                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 设备绑定流程

用户登录 Web 后，可生成绑定码供 macOS 客户端使用：

```
┌─────────────────────────────────────────────────────────────┐
│                   设备绑定流程                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────┐  ┌─────────────┐  ┌─────────────────┐    │
│  │ Web 用户中心 │  │  后端 API   │  │ macOS 客户端    │    │
│  └──────────────┘  └─────────────┘  └─────────────────┘    │
│         │                │                  │               │
│ 1. 点击"生成绑定码"      │                  │               │
│         │ POST /auth/device/code           │               │
│         │───────────────>│                  │               │
│         │<───────────────│                  │               │
│         │   { code: "A3X9K7" }             │               │
│         │                │                  │               │
│ 2. 显示 6 位绑定码        │                  │               │
│   (5分钟有效)            │                  │               │
│         │                │                  │               │
│         │                │   3. 输入绑定码   │               │
│         │                │<─────────────────│               │
│         │                │ POST /auth/device/claim          │
│         │                │<─────────────────│               │
│         │                │ 4. 返回 Token     │               │
│         │                │─────────────────>│               │
│         │                │                  │ 5. 客户端登录  │
│         │                │                  │    成功       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 🌐 与 macOS 客户端协作

### 整体架构

```
┌─────────────────────────────────────────────────────────────────┐
│                        系统架构                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────────────────────────────────────────────────┐    │
│   │                    用户层                              │    │
│   │  ┌─────────────┐              ┌─────────────────┐     │    │
│   │  │  浏览器     │              │  macOS 客户端    │     │    │
│   │  │  (Web)     │              │  (Swift)        │     │    │
│   │  └──────┬──────┘              └────────┬────────┘     │    │
│   └─────────┼───────────────────────────────┼─────────────┘    │
│             │                               │                   │
│             │ HTTPS                         │ HTTPS             │
│             ▼                               ▼                   │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                   后端服务层                             │  │
│   │                                                         │  │
│   │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐ │  │
│   │  │ Auth API    │  │ LLM Gateway │  │ Billing API     │ │  │
│   │  │ - 微信登录   │  │ - 模型路由   │  │ - 订阅管理      │ │  │
│   │  │ - 设备绑定   │  │ - 速率限制   │  │ - 配额管理      │ │  │
│   │  │ - JWT管理    │  │ - 流式响应   │  │ - 使用记录      │ │  │
│   │  └─────────────┘  └─────────────┘  └─────────────────┘ │  │
│   │                                                         │  │
│   │          FastAPI + SQLite/PostgreSQL + Redis            │  │
│   └─────────────────────────────────────────────────────────┘  │
│                               │                                 │
│                               ▼                                 │
│   ┌─────────────────────────────────────────────────────────┐  │
│   │                    LLM 提供商                            │  │
│   │  ┌──────────┐  ┌───────────┐  ┌──────────┐             │  │
│   │  │ OpenAI   │  │ Anthropic │  │ DeepSeek │             │  │
│   │  │ GPT-4    │  │ Claude    │  │ (国内)   │             │  │
│   │  └──────────┘  └───────────┘  └──────────┘             │  │
│   └─────────────────────────────────────────────────────────┘  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 功能对照

| 功能 | Web 前端 | macOS 客户端 |
|------|---------|-------------|
| 用户注册/登录 | ✅ 微信扫码、邮箱 | ✅ 通过绑定码 |
| 查看订阅状态 | ✅ 用户中心 | ✅ 设置页面 |
| 生成设备绑定码 | ✅ 用户中心 | - |
| 使用绑定码登录 | - | ✅ 登录界面 |
| 订阅管理 | ✅ 定价页面 | 🔗 跳转 Web |
| 下载客户端 | ✅ 下载页面 | - |
| LLM 对话 | - | ✅ 主功能 |
| 实时音频转录 | - | ✅ 主功能 |

## 📦 开发指南

### 环境变量

创建 `.env.local` 文件：

```env
# 后端 API 地址
NEXT_PUBLIC_API_URL=http://localhost:8000

# NextAuth 配置
AUTH_SECRET=your-auth-secret-key

# 微信 OAuth
WECHAT_APP_ID=your-wechat-app-id
WECHAT_APP_SECRET=your-wechat-app-secret
WECHAT_REDIRECT_URI=http://localhost:3000/api/auth/callback/wechat
```

### 启动开发服务器

```bash
# 安装依赖
npm install

# 启动开发服务器 (Turbopack)
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器
npm run start
```

### 端口配置

| 服务 | 端口 | 说明 |
|------|------|------|
| Web 前端 | 3000 | Next.js 开发服务器 |
| 后端 API | 8000 | FastAPI 服务 |

## 🔜 待开发功能

- [ ] 主页定制优化（高优先级）
- [ ] 订阅购买和支付集成（高优先级）
- [ ] 使用统计详情页面

## 📄 相关仓库

## 📜 许可证

Private - All Rights Reserved
